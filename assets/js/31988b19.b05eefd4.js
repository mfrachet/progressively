"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[398],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return g}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(t),g=o,h=p["".concat(l,".").concat(g)]||p[g]||d[g]||a;return t?r.createElement(h,i(i({ref:n},c),{},{components:t})):r.createElement(h,i({ref:n},c))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=p;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},4986:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return g},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),i=["components"],s={},l="React (client)",u={unversionedId:"sdks/react",id:"sdks/react",title:"React (client)",description:"React SDK minified and gzipped size",source:"@site/docs/sdks/react.md",sourceDirName:"sdks",slug:"/sdks/react",permalink:"/progressively/docs/sdks/react",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/sdks/react.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"React (server)",permalink:"/progressively/docs/sdks/react-ssr"}},c={},d=[{value:"Installation",id:"installation",level:2},{value:"Ready to go snippet",id:"ready-to-go-snippet",level:2},{value:"Alternative content when loading",id:"alternative-content-when-loading",level:2},{value:"Showing nothing during the resolution",id:"showing-nothing-during-the-resolution",level:3},{value:"Showing whatever you want during the resolution",id:"showing-whatever-you-want-during-the-resolution",level:3},{value:"Usage on your own server",id:"usage-on-your-own-server",level:2},{value:"Passing custom fields",id:"passing-custom-fields",level:2}],p={toc:d};function g(e){var n=e.components,t=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"react-client"},"React (client)"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://img.shields.io/bundlephobia/minzip/@progressively/react",alt:"React SDK minified and gzipped size"})),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @progressively/react\n")),(0,a.kt)("h2",{id:"ready-to-go-snippet"},"Ready to go snippet"),(0,a.kt)("p",null,"The following snippet shows how to use Progressively with React ",(0,a.kt)("strong",{parentName:"p"},"on the client"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { ProgressivelyProvider, useFlags } from "@progressively/react";\n\nconst FlaggedComponent = () => {\n  // Get the flags from the component\n  const { flags } = useFlags();\n\n  // Check the flag value and display the good variant\n  if (flags.newHomepage) {\n    return <div>New variant</div>;\n  }\n\n  return <div>Old variant</div>;\n};\n\nexport default function MyPage() {\n  return (\n    <ProgressivelyProvider clientKey={CLIENT_KEY}>\n      <FlaggedComponent />\n    </ProgressivelyProvider>\n  );\n}\n')),(0,a.kt)("h2",{id:"alternative-content-when-loading"},"Alternative content when loading"),(0,a.kt)("p",null,"When resolving the feature flags ",(0,a.kt)("strong",{parentName:"p"},"on the client"),', an HTTP request is made during whom the component might create a "flashy" or "flickering" effect showing the old variant and then resolving the new variant.'),(0,a.kt)("p",null,"In order to prevent this behavior, Progressively provides two mechanics:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"showing nothing (neither the old nor the new variants) during the HTTP request"),(0,a.kt)("li",{parentName:"ul"},"providing a ",(0,a.kt)("inlineCode",{parentName:"li"},"isLoading")," boolean value that indicate whether the HTTP request has been fulfilled")),(0,a.kt)("h3",{id:"showing-nothing-during-the-resolution"},"Showing nothing during the resolution"),(0,a.kt)("p",null,"If you prefer to show nothing to the client during the resolution, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"onlyRenderWhenReady")," boolean prop on the ",(0,a.kt)("inlineCode",{parentName:"p"},"ProgressivelyProvider"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"export default function MyPage() {\n  return (\n    <ProgressivelyProvider clientKey={CLIENT_KEY} onlyRenderWhenReady>\n      <FlaggedComponent />\n    </ProgressivelyProvider>\n  );\n}\n")),(0,a.kt)("h3",{id:"showing-whatever-you-want-during-the-resolution"},"Showing whatever you want during the resolution"),(0,a.kt)("p",null,"If you prefer to customize what's visible on the screen during the resolution you can rely on the ",(0,a.kt)("inlineCode",{parentName:"p"},"isLoading")," value returned by the ",(0,a.kt)("inlineCode",{parentName:"p"},"useFlags")," hook:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"const FlaggedComponent = () => {\n  const { flags, isLoading } = useFlags();\n\n  // Show this thing during the flag resolution\n  if (isLoading) {\n    return <p>The flags are resolving...</p>;\n  }\n\n  if (flags.newHomepage) {\n    return <div>New variant</div>;\n  }\n\n  return <div>Old variant</div>;\n};\n")),(0,a.kt)("h2",{id:"usage-on-your-own-server"},"Usage on your own server"),(0,a.kt)("p",null,"You may (probably) want to host Progressively on your own server and make sure your client application hits the good apis. In order to do so, you can specify the API and Websocket URL by passing ",(0,a.kt)("inlineCode",{parentName:"p"},"apiUrl")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"websocketUrl")," to the ",(0,a.kt)("inlineCode",{parentName:"p"},"ProgressivelyProvider"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'export default function MyPage() {\n  return (\n    <ProgressivelyProvider\n      clientKey={CLIENT_KEY}\n      apiUrl="https://your-hosting-server" // put your address here\n      websocketUrl="wss://your-hosting-server" // put your address here\n    >\n      <FlaggedComponent />\n    </ProgressivelyProvider>\n  );\n}\n')),(0,a.kt)("h2",{id:"passing-custom-fields"},"Passing custom fields"),(0,a.kt)("p",null,"With Progressively, you can pass extra fields to the server in order to create customized strategies. For instance, you can create a strategy that targets a specific email, let's say: ",(0,a.kt)("inlineCode",{parentName:"p"},"john.doe@gmail.com"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'export default function MyPage() {\n  return (\n    <ProgressivelyProvider\n      clientKey={CLIENT_KEY}\n      fields={{\n        email: "john.doe@gmail.com",\n      }}\n    >\n      <FlaggedComponent />\n    </ProgressivelyProvider>\n  );\n}\n')))}g.isMDXComponent=!0}}]);